<app-navbar></app-navbar>
<form (ngSubmit)="onSubmit()" [formGroup]="productForm" class="user-form">
    <div class="form-group">
        <label for="warehouse">Warehouse :</label>
        <select formControlName="warehouse">
            <option value="">Select a Warehouse</option>
            <option *ngFor="let warehouse of warehouses | async" [ngValue]="warehouse">
                {{ warehouse.warehouseName }}
            </option>
        </select>
        <div class="error" *ngIf="isFormSubmitted && productForm.controls['warehouse'].invalid">
            Warehouse is required.
        </div>
    </div>

    <div class="form-group">
    <label for="productName">Product Name:</label>
    <input type="text" id="productName" formControlName="productName" class="form-control" />
    <div class="error" *ngIf="isFormSubmitted && productForm.controls['productName'].invalid">
        Product name is required.
    </div>
</div>

<div class="form-group">
    <label for="productDescription">Product Description:</label>
    <input type="text" id="productDescription" formControlName="productDescription" class="form-control" />
    <div class="error" *ngIf="isFormSubmitted && productForm.controls['productDescription'].invalid">
        Product description is required.
    </div>
</div>

<div class="form-group">
    <label for="quantity">Quantity :</label>
    <input type="number" id="quantity" formControlName="quantity" class="form-control" />
    <div class="error" *ngIf="isFormSubmitted && productForm.controls['quantity'].errors?.['required']">
        Quantity is required.
    </div>
    <div class="error" *ngIf="isFormSubmitted && productForm.controls['quantity'].errors?.['min']">
        Quantity must be 0 or more.
    </div>
    <div class="error" *ngIf="isFormSubmitted && productForm.controls['quantity'].errors?.['capacityExceeded']">
        Quantity exceeds selected warehouse capacity.
    </div>
</div>

<div class="form-group">
    <label for="price">Price :</label>
    <input type="number" id="price" formControlName="price" class="form-control" />
    <div class="error" *ngIf="isFormSubmitted && productForm.controls['price'].invalid">
        Price is required and must be at least 1.
    </div>
</div>

    <button type="submit" class="btn-submit">Create Product</button>

    <ng-container>
        <div *ngIf="productError | async as error" class="error">
            {{ error }}
        </div>
        <div *ngIf="productSuccess | async as msg" class="success">
            {{ msg }}
        </div>
    </ng-container>

    <a routerLink="/supplylink" class="task-list" class="task-list">Dashboard</a>
</form>
